<!DOCTYPE html>
<html lang="en">
<head>
    <title>Pipe.js Demo</title>
    <style>
        body {
            font-family: sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        textarea, pre {
            width: 100%;
            height: 200px;
            font-family: monospace;
        }

        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
<h1>Pipe.js Live Demo</h1>
<p>Попробуйте Pipe.js прямо в браузере:</p>

<div>
    <h3>Пример 1: Обработка текста</h3>
    <textarea id="code1">
        // Простой пайплайн
        const pipe = (...fns) => (x) => fns.reduce((v, f) => f(v), x);

        const process = pipe(
            text => text.trim(),
            text => text.toUpperCase(),
            text => `Результат: ${text}`
        );

        console.log(process('  hello world  '));
    </textarea>
    <button onclick="runCode('code1')">Запустить</button>
    <pre id="output1"></pre>
</div>

<script>
    function runCode(id) {
        const code = document.getElementById(id).value;
        const outputId = 'output' + id.replace('code', '');
        const output = document.getElementById(outputId);

        try {
            // Сохраняем console.log
            const oldLog = console.log;
            let logs = [];
            console.log = (...args) => {
                logs.push(args.map(arg =>
                    typeof arg === 'object' ? JSON.stringify(arg) : arg
                ).join(' '));
            };

            // Выполняем код
            eval(code);

            // Восстанавливаем и показываем результат
            console.log = oldLog;
            output.textContent = logs.join('\n');
            output.style.color = 'green';
        } catch (error) {
            output.textContent = 'Ошибка: ' + error.message;
            output.style.color = 'red';
        }
    }
</script>

<p>Больше примеров в <a href="index.html">документации</a>.</p>
</body>
</html>